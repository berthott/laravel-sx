<?php

namespace berthott\SX\Tests\Feature\Sxable;

use berthott\SX\Facades\Sx;
use berthott\SX\Facades\Sxable;
use Illuminate\Support\Facades\Schema;

class SxableTest extends SxableTestCase
{
    public function test_sxable_found(): void
    {
        $sxables = Sxable::getSxableClasses();
        $this->assertNotEmpty($sxables);
    }
    
    public function test_entity_table_creation(): void
    {
        Sxable::getSxableClasses();
        $this->assertTrue(Schema::hasTable('entities'));
        $this->assertTrue(Schema::hasColumns('entities', [
            'survey', 'responde', 'organiza', 'stat_1', 'stat_2', 'stat_3', 'stat_4', 'stat_5', 'stat_6', 'stat_7', 'stat_8', 'stat_9', 'stat_10', 'stat_11', 'stat_12', 'stat_13', 'stat_14', 'stat_15', 'stat_16', 'stat_17', 'stat_18', 'stat_19', 'stat_20', 'created', 'modified', 'closetim', 'starttim', 'difftime', 'response', 'numberof', 'importgr', 'distribu', 'email', 'digitald', 'digit_1', 's_5', 's_2', 's_3', 'name', 's_4', 's_1', 's_6', 's_7', 's_14', 's_9', 's_15', 's_10', 's_11_1', 's_11_2', 's_11_3', 's_11_4', 's_11_5', 's_11_6', 's_11_7', 's_11_8', 's_11_9', 's_11_10', 's_11_11', 's_11_12', 's_11_13', 's_11_14', 's_11_15', 's_11_16', 's_11_17', 's_12', 's_17', 's_18', 'social_e', 'inclusio', 'number_j', 'still_ac', 'best_pra', 'validati', 'lang', 'statc_1', 'statc_2', 'statc_3', 'statc_4', 'statc_5', 'statc_6', 'statc_7', 'statc_8', 'statc_9', 'stat_21', 'statd_1', 'statd_2', 'statd_3', 'statd_4', 'statd_5', 'stats_1', 'stats_2', 'stats_3', 'stats_4', 'stats_5', 'stats_6', 'stat_22', 'stat_23', 'stat_24', 'stat_25', 'stato_1', 'stato_2', 'stato_3', 'stato_4', 'stato_5',
        ]));
        $this->assertTrue(Schema::hasTable('entity_labels'));
        $this->assertTrue(Schema::hasColumns('entity_labels', [
            'variableName', 'value', 'label',
        ]));
        $this->assertTrue(Schema::hasTable('entity_questions'));
        $this->assertTrue(Schema::hasColumns('entity_questions', [
            'questionName', 'questionText',
        ]));
    }
    
    public function test_question_table_values(): void
    {
        Sxable::getSxableClasses();
        $questions =  [['questionName' => 'survey', 'questionText' => 'Umfrage'], ['questionName' => 'respondentid', 'questionText' => 'Teilnehmer-ID'], ['questionName' => 'organization', 'questionText' => 'Organisation'], ['questionName' => 'statinternal', 'questionText' => 'Basisstatus'], ['questionName' => 'created', 'questionText' => 'Erstellt'], ['questionName' => 'modified', 'questionText' => 'Geändert'], ['questionName' => 'closeTime', 'questionText' => 'Ende'], ['questionName' => 'startTime', 'questionText' => 'Beginn'], ['questionName' => 'diffTime', 'questionText' => 'Antwortdauer (Sekunden)'], ['questionName' => 'responseCollectSessions', 'questionText' => 'Antwortsitzungen'], ['questionName' => 'numberOfReturnedmail', 'questionText' => 'Anzahl der zurückgesendeten E-Mails'], ['questionName' => 'importgroup', 'questionText' => 'Importgruppe'], ['questionName' => 'distributionschedule', 'questionText' => 'Zeitplan für die Datenerfassung'], ['questionName' => 'email', 'questionText' => 'E-Mail'], ['questionName' => 'digitalDistributionStatus', 'questionText' => 'digitalDistributionStatus'], ['questionName' => 'digitalDistributionErrorMessage', 'questionText' => 'digitalDistributionErrorMessage'], ['questionName' => 's_5', 'questionText' => 'status'], ['questionName' => 's_2', 'questionText' => 'year'], ['questionName' => 's_3', 'questionText' => 'project'], ['questionName' => 'name', 'questionText' => 'name'], ['questionName' => 's_4', 'questionText' => 'sex'], ['questionName' => 's_1', 'questionText' => 'email'], ['questionName' => 's_6', 'questionText' => 'telephone'], ['questionName' => 's_7', 'questionText' => 'country_origin'], ['questionName' => 's_14', 'questionText' => 'name_company'], ['questionName' => 's_9', 'questionText' => 'country_foundation'], ['questionName' => 's_15', 'questionText' => 'business_idea'], ['questionName' => 's_10', 'questionText' => 'business_idea_description'], ['questionName' => 's_11', 'questionText' => 'SDG'], ['questionName' => 's_12', 'questionText' => 'focus_area'], ['questionName' => 's_17', 'questionText' => 'year_foundation'], ['questionName' => 's_18', 'questionText' => 'gender_relevance'], ['questionName' => 'social_entrepreneur', 'questionText' => 'social_entrepreneurship'], ['questionName' => 'inclusion', 'questionText' => 'inclusion'], ['questionName' => 'number_jobs', 'questionText' => 'number_jobs'], ['questionName' => 'still_active', 'questionText' => 'still_active'], ['questionName' => 'best_practice', 'questionText' => 'best_practice'], ['questionName' => 'validation', 'questionText' => 'validation'], ['questionName' => 'lang', 'questionText' => 'Sprache'], ['questionName' => 'statcompletion', 'questionText' => 'Abschlussstatus'], ['questionName' => 'statcreation', 'questionText' => 'Erstellungsstatus'], ['questionName' => 'statdistribution', 'questionText' => 'Verteilungsstatus'], ['questionName' => 'statsource', 'questionText' => 'Ursprung der Antworten'], ['questionName' => 'statcollect', 'questionText' => 'Erfassungsstatus'], ['questionName' => 'statoverall', 'questionText' => 'Gesamtstatus'], ];
        foreach ($questions as $question) {
            $this->assertDatabaseHas('entity_questions', $question);
        }
    }

    public function test_label_table_values(): void
    {
        Sxable::getSxableClasses();
        $labels = [
            ["variableName" => "survey", "value" => 1325978, "label" => "HF 4 - GfE Applicants/participants"], ["variableName" => "organiza", "value" => 269318, "label" => "GIZ - PMD FMD M&Q Tool"], ["variableName" => "stat_1", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_1", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_2", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_2", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_3", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_3", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_4", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_4", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_5", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_5", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_6", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_6", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_7", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_7", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_8", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_8", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_9", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_9", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_10", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_10", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_11", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_11", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_12", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_12", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_13", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_13", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_14", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_14", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_15", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_15", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_16", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_16", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_17", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_17", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_18", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_18", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_19", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_19", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_20", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_20", "value" => 1, "label" => "Ausgewählt"],
            ["variableName" => "digitald", "value" => 1, "label" => "1"], ["variableName" => "digitald", "value" => 2, "label" => "2"], ["variableName" => "digitald", "value" => 3, "label" => "3"], ["variableName" => "digitald", "value" => 4, "label" => "4"], ["variableName" => "digitald", "value" => 6, "label" => "6"], ["variableName" => "digitald", "value" => 5, "label" => "5"], ["variableName" => "s_5", "value" => 1, "label" => "laufende Bewerbung"], ["variableName" => "s_5", "value" => 2, "label" => "abgelehnte Bewerbung"], ["variableName" => "s_5", "value" => 3, "label" => "teilnehmend ohne Gründung"], ["variableName" => "s_5", "value" => 4, "label" => "teilnehmend mit Gründung"], ["variableName" => "s_3", "value" => 1, "label" => "FACE"], ["variableName" => "s_3", "value" => 2, "label" => "EU MOBILITY"], ["variableName" => "s_3", "value" => 3, "label" => "GfE Klassik"], ["variableName" => "s_3", "value" => 4, "label" => "GfE Alumni"], ["variableName" => "s_3", "value" => 5, "label" => "MEETAfrica"], ["variableName" => "s_4", "value" => 1, "label" => "männlich"], ["variableName" => "s_4", "value" => 2, "label" => "weiblich"], ["variableName" => "s_7", "value" => 1, "label" => "Georgien"], ["variableName" => "s_7", "value" => 2, "label" => "Ghana"], ["variableName" => "s_7", "value" => 3, "label" => "Indien"], ["variableName" => "s_7", "value" => 4, "label" => "Indonesien"], ["variableName" => "s_7", "value" => 5, "label" => "Kamerun"], ["variableName" => "s_7", "value" => 6, "label" => "Kolumbien"], ["variableName" => "s_7", "value" => 7, "label" => "Marokko"], ["variableName" => "s_7", "value" => 8, "label" => "Nigeria"], ["variableName" => "s_7", "value" => 9, "label" => "Serbia"], ["variableName" => "s_7", "value" => 10, "label" => "Tunesien"], ["variableName" => "s_7", "value" => 11, "label" => "Vietnam"], ["variableName" => "s_9", "value" => 1, "label" => "Georgien"], ["variableName" => "s_9", "value" => 2, "label" => "Ghana"], ["variableName" => "s_9", "value" => 3, "label" => "Indien"], ["variableName" => "s_9", "value" => 4, "label" => "Indonesien"], ["variableName" => "s_9", "value" => 5, "label" => "Kamerun"], ["variableName" => "s_9", "value" => 6, "label" => "Kolumbien"], ["variableName" => "s_9", "value" => 7, "label" => "Marokko"], ["variableName" => "s_9", "value" => 8, "label" => "Nigeria"], ["variableName" => "s_9", "value" => 9, "label" => "Serbia"], ["variableName" => "s_9", "value" => 10, "label" => "Tunesien"], ["variableName" => "s_9", "value" => 11, "label" => "Vietnam"], ["variableName" => "s_11_1", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_1", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_2", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_2", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_3", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_3", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_4", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_4", "value" => 1, "label" => "Ausgewählt"],
            ["variableName" => "s_11_5", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_5", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_6", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_6", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_7", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_7", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_8", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_8", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_9", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_9", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_10", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_10", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_11", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_11", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_12", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_12", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_13", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_13", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_14", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_14", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_15", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_15", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_16", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_16", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_11_17", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "s_11_17", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "s_12", "value" => 1, "label" => "Bildung"], ["variableName" => "s_12", "value" => 2, "label" => "Demokratie, Zivilgesellschaft und öffentliche Verwaltung"], ["variableName" => "s_12", "value" => 3, "label" => "Energie"], ["variableName" => "s_12", "value" => 4, "label" => "Gesundheit, Familienplanung, HIV/AIDS"], ["variableName" => "s_12", "value" => 5, "label" => "Nachhaltige Wirtschaftsentwicklung"], ["variableName" => "s_12", "value" => 6, "label" => "Sicherung der Ernährung, Landwirtschaft"], ["variableName" => "s_12", "value" => 7, "label" => "Transport und Kommunikation"], ["variableName" => "s_12", "value" => 8, "label" => "Trinkwasser, Wassermanagement, Abwasser/Abfallentsorgung"], ["variableName" => "s_12", "value" => 9, "label" => "Umweltpolitik, Schutz und nachhaltige Nutzung natürlicher Ressourcen"], ["variableName" => "s_18", "value" => 1, "label" => "GG0"], ["variableName" => "s_18", "value" => 2, "label" => "GG1"], ["variableName" => "s_18", "value" => 3, "label" => "GG2"], ["variableName" => "social_e", "value" => 1, "label" => "ja"], ["variableName" => "social_e", "value" => 2, "label" => "nein"], ["variableName" => "inclusio", "value" => 1, "label" => "ja"], ["variableName" => "inclusio", "value" => 2, "label" => "nein"], ["variableName" => "still_ac", "value" => 1, "label" => "ja"], ["variableName" => "still_ac", "value" => 2, "label" => "nein"], ["variableName" => "best_pra", "value" => 1, "label" => "ja"], ["variableName" => "best_pra", "value" => 2, "label" => "nein"], ["variableName" => "validati", "value" => 1, "label" => "ja"], ["variableName" => "validati", "value" => 2, "label" => "nein"], ["variableName" => "lang", "value" => 2, "label" => "Deutsch"], ["variableName" => "lang", "value" => 3, "label" => "Englisch"], ["variableName" => "statc_1", "value" => 0, "label" => "Nicht ausgewählt"],
            ["variableName" => "statc_1", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_2", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_2", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_3", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_3", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_4", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_4", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_5", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_5", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_6", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_6", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_7", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_7", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_8", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_8", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statc_9", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statc_9", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_21", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_21", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statd_1", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statd_1", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statd_2", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statd_2", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statd_3", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statd_3", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statd_4", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statd_4", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "statd_5", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "statd_5", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stats_1", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stats_1", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stats_2", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stats_2", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stats_3", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stats_3", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stats_4", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stats_4", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stats_5", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stats_5", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stats_6", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stats_6", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_22", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_22", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_23", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_23", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_24", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_24", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stat_25", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stat_25", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stato_1", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stato_1", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stato_2", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stato_2", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stato_3", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stato_3", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stato_4", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stato_4", "value" => 1, "label" => "Ausgewählt"], ["variableName" => "stato_5", "value" => 0, "label" => "Nicht ausgewählt"], ["variableName" => "stato_5", "value" => 1, "label" => "Ausgewählt"]
        ];
        foreach ($labels as $label) {
            $this->assertDatabaseHas('entity_labels', $label);
        }
    }
}
